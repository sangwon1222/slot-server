var u=Object.defineProperty;var l=(a,s,e)=>s in a?u(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var o=(a,s,e)=>(l(a,typeof s!="symbol"?s+"":s,e),e);import{F as t,G as g,b as r,B as c,a as i}from"./index-f5c4ded4.js";class d{constructor(){o(this,"signIn",async({l:s})=>{try{const{data:e}=await t.post("auth/login",{l:s});if(localStorage.clear(),e.ok){const n=JSON.parse(g(e.data,"login-info"));r.userID=n.userID,r.accessToken=n.accessToken,r.refreshToken=n.refreshToken,r.currentGroupIndex=n.currentGroupIndex,r.currentTurn=n.currentTurn,r.gameName=n.gameTable,r.signedIn=!0,localStorage.setItem("k",e.data)}else return r.userID="",r.accessToken="",r.refreshToken="",r.currentGroupIndex=0,r.currentTurn=0,r.signedIn=!1,{ok:!1,msg:e.msg};return e}catch(e){return console.error("sign-in ERROR",e),r.userID="",r.accessToken="",r.refreshToken="",r.signedIn=!1,r.currentGroupIndex=0,r.currentTurn=0,localStorage.clear(),{ok:!1,msg:e.message?e.message:""}}});o(this,"signUp",async({l:s})=>{try{const{data:e}=await t.post("auth/signUp",{l:s});return!e.ok&&e.msg&&c.error(e.msg),e}catch(e){console.log(e),c.error(e.message)}finally{i.isLoading=!1}})}}const p=new d;export{p as a};
