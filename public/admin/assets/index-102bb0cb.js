var B=Object.defineProperty;var O=(e,r,t)=>r in e?B(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var n=(e,r,t)=>(O(e,typeof r!="symbol"?r+"":r,t),t);import{Y as W,D as N,Z as Y,r as j,p as c,q as X,f as D,o as R,z as F,h as U,j as H,s as C,_ as k}from"./index-8e7e92d0.js";import{a as l}from"./index-0c264f6f.js";import{_ as G}from"./aButton.vue_vue_type_script_setup_true_lang-4e9ddeea.js";var q=/\s/;function J(e){for(var r=e.length;r--&&q.test(e.charAt(r)););return r}var K=/^\s+/;function Q(e){return e&&e.slice(0,J(e)+1).replace(K,"")}var I=0/0,V=/^[-+]0x[0-9a-f]+$/i,ee=/^0b[01]+$/i,re=/^0o[0-7]+$/i,te=parseInt;function T(e){if(typeof e=="number")return e;if(W(e))return I;if(N(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=N(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Q(e);var t=ee.test(e);return t||re.test(e)?te(e.slice(2),t?2:8):V.test(e)?I:+e}var ae=function(){return Y.Date.now()};const L=ae;var ie="Expected a function",oe=Math.max,le=Math.min;function ge(e,r,t){var a,o,b,f,s,m,g=0,S=!1,h=!1,w=!0;if(typeof e!="function")throw new TypeError(ie);r=T(r)||0,N(t)&&(S=!!t.leading,h="maxWait"in t,b=h?oe(T(t.maxWait)||0,r):b,w="trailing"in t?!!t.trailing:w);function v(i){var d=a,p=o;return a=o=void 0,g=i,f=e.apply(p,d),f}function $(i){return g=i,s=setTimeout(y,r),S?v(i):f}function A(i){var d=i-m,p=i-g,E=r-d;return h?le(E,b-p):E}function z(i){var d=i-m,p=i-g;return m===void 0||d>=r||d<0||h&&p>=b}function y(){var i=L();if(z(i))return P(i);s=setTimeout(y,A(i))}function P(i){return s=void 0,w&&a?v(i):(a=o=void 0,f)}function M(){s!==void 0&&clearTimeout(s),g=0,a=m=o=s=void 0}function Z(){return s===void 0?f:P(L())}function x(){var i=L(),d=z(i);if(a=arguments,o=this,m=i,d){if(s===void 0)return $(m);if(h)return clearTimeout(s),s=setTimeout(y,r),v(m)}return s===void 0&&(s=setTimeout(y,r)),f}return x.cancel=M,x.flush=Z,x}const u=j({prizeData:{},prize:{},scoreList:[]});class ne{constructor(){n(this,"searchGame",async r=>{try{const{data:t}=r?await l.post("gameList/get-game-list",{name:r}):await l.post("gameList/get-game-list",{});return t}catch(t){return console.log("api/gameList /get-game-list error",t),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"createGame",async({name:r,turnCount:t,score:a})=>{try{const{data:o}=await l.post("gameList/create-game",{name:r,turnCount:t,score:a});return o}catch(o){return console.log("api/gameList /create-game error",o),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"getGame",async r=>{try{const{data:t}=await l.post("gameList/get-game",{name:r});return t}catch(t){console.log(t),c.error(`${t.msg}`)}finally{}});n(this,"addGameContents",async({name:r,list:t})=>{try{const a=await l.post("gameList/add-game-contents",{name:r,list:t});return console.log(a),a.data}catch(a){return console.log("api/gameList /add-game-contents error",a),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"deleteGame",async r=>{try{const{data:t}=await l.post("gameList/delete-game",{name:r});return t}catch(t){return console.log("api/gameList /delete-game error",t),c.error("GAME 삭제 실패"),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"searchPrizeName",async r=>{try{if(r){const{data:t}=await l.post("gameList/get-prize-list",{name:r});return t}else{u.scoreList=[],u.prizeData=[];const{data:t}=await l.post("gameList/get-prize-list",{});return X(t.data,a=>{u.prizeData[`${a.totalScore}`]?u.prizeData[`${a.totalScore}`].push(a):u.prizeData[`${a.totalScore}`]=[a]}),u.scoreList=Object.keys(u.prizeData),t}}catch(t){return console.log("api/gameList /get-prize-list error",t),c.error("PRIZE 검색 실패"),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"savePrize",async r=>{try{await l.post("gameList/delete-prize",{name:r[0].name});const{data:t}=await l.post("gameList/save-prize",{rowData:r});return t}catch(t){console.log("api/gameList /save-prize error",t),c.error("PRIZE 저장 실패")}finally{}});n(this,"getPrize",async r=>{try{const{data:t}=await l.post("gameList/get-prize",{name:r});return t}catch(t){return console.log("api/gameList /search-prize error",t),c.error("PRIZE 조회 실패"),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"getRandomPrize",async r=>{try{const{data:t}=await l.post("gameList/get-random-prize",{score:r});return t}catch(t){return console.log("api/gameList /get-random-prize error",t),c.error("PRIZE 조회 실패"),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"deletePrize",async r=>{try{const{data:t}=await l.post("gameList/delete-prize",{name:r});return t}catch(t){return console.log("api/gameList /delete-prize error",t),c.error("PRIZE 삭제 실패"),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"getScore",async r=>{try{const{data:t}=r?await l.post("gameList/get-score",{score:r}):await l.post("gameList/get-score");return t}catch(t){return console.log("api/gameList /get-score error",t),c.error("get-score 실패"),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"addScore",async r=>{try{const{data:t}=await l.post("gameList/add-score",{list:r});return t}catch(t){return console.log("api/gameList /get-score error",t),c.error("get-score 실패"),{ok:!1,data:[],err:"api error"}}finally{}});n(this,"deleteScore",async r=>{try{const{data:t}=await l.post("gameList/delete-score",{idxList:r});return t}catch(t){return console.log("api/gameList /delete-score error",t),c.error("delete-score 실패"),{ok:!1,data:[],err:"api error"}}finally{}})}}const he=new ne,_=D({__name:"aPrizeDetailBtn",props:{},setup(e){const r=e,t=()=>{var a,o;return(o=(a=r.params)==null?void 0:a.context)==null?void 0:o.openPop(r.params.data)};return(a,o)=>(R(),F(G,{label:"자세히","default-style":`${r.params.value?"bg-slate-200 hover:bg-slate-300":"bg-stone-200 hover:bg-stone-300"} h-[30px] px-[10px] rounded duration-100`,onClick:t},null,8,["default-style"]))}}),se={class:"flex h-full w-full items-center"},ce=D({__name:"btnCellRenderer",props:{},setup(e){const r=e,t=()=>{var a,o;return(o=(a=r.params)==null?void 0:a.context)==null?void 0:o.btnClickevent(+r.params.node.id)};return(a,o)=>(R(),U("div",se,[H(G,{label:r.params.value?r.params.value:"","default-style":"h-[30px] px-[10px] rounded-xl bg-red-400 text-white ",onClick:t},null,8,["label"])]))}}),pe={gameList:[{headerName:"",pinned:"left",field:"",width:42,lockPosition:!0,sortable:!1,checkboxSelection:!0,headerCheckboxSelection:!0},{headerName:"IDX",width:60,filter:!1,lockPosition:!0,valueGetter:({node:e})=>+e.id+1},{headerName:"이름",field:"name",width:100},{headerName:"GAME",width:100,cellStyle:{display:"flex",alignItems:"center"},cellRenderer:_},{headerName:"전체 턴수",field:"turnCount",width:100},{headerName:"총 상금",field:"score",width:100},{headerName:"확률",field:"percentage",valueGetter:({data:e})=>(e.percentage=C(+e.score,+e.turnCount),e.percentage+" %"),width:100}],gameDetail:[{headerName:"IDX",width:60,filter:!1,lockPosition:!0,valueGetter:({node:e})=>+e.id+1},{headerName:"점수",field:"score",width:100},{headerName:"턴",field:"turnCount",width:100},{headerName:"예시코드",field:"Ycode",width:100},{headerName:"이벤트코드",field:"Pcode",width:100}],gameSelectPrize:[{headerName:"idx",valueGetter:e=>+e.node.rowIndex+1,width:50,editable:!1},{headerName:"점수",field:"score",cellDataType:"text",cellEditor:"agSelectCellEditor",cellEditorParams:()=>({values:u.scoreList,valueListMaxHeight:200,valueListMaxWidth:200})},{field:"prizeCount",headerName:"개수",cellDataType:"text",valueSetter:({data:e,newValue:r,oldValue:t})=>k(+r)||r.includes("e")?e.prizeCount=+t:e.prizeCount=+r},{headerName:"총 점수",editable:!1,valueGetter:({data:e})=>{const r=+e.prizeCount*+e.score;return k(r)?"0":+e.prizeCount*+e.score}},{headerName:"삭제",width:100,cellRenderer:ce,cellRendererParams:{value:"삭제"},editable:!1}],prizeList:[{headerName:"",pinned:"left",field:"",width:40,lockPosition:!0,checkboxSelection:!0,headerCheckboxSelection:!0,sortable:!1},{headerName:"IDX",width:60,filter:!1,lockPosition:!0,valueGetter:({node:e})=>+e.id+1},{headerName:"PRIZE",width:100,cellStyle:{display:"flex",alignItems:"center"},cellRenderer:_},{headerName:"PRIZE 이름",field:"name",width:100},{headerName:"전체 턴수",field:"totalTurn",width:100},{headerName:"총 상금",field:"totalScore",width:100},{headerName:"확률",width:100,valueFormatter:({data:e})=>k(+e.totalTurn)?"0 %":C(+e.totalScore,+e.totalTurn)+" %"}],prizeDetail:[{width:40,checkboxSelection:!0,headerCheckboxSelection:!0},{headerName:"ORDER",width:100,rowDrag:!0,valueGetter:({node:e})=>+e.rowIndex+1},{headerName:"예시코드",field:"Ycode",width:100,editable:!0,cellStyle:()=>({background:"#eef7fe"}),valueGetter:({data:e})=>e.Ycode=e.Ycode?e.Ycode.replaceAll(" ","").toUpperCase():"-"},{headerName:"이벤트 코드",field:"Pcode",width:100,editable:!0,cellStyle:()=>({background:"#eef7fe"}),valueGetter:({data:e})=>e.Pcode=e.Pcode?e.Pcode.replaceAll(" ","").toUpperCase():"-"},{headerName:"점수",field:"score",editable:!0,cellStyle:()=>({background:"#eef7fe"}),width:100},{headerName:"전체 턴수",field:"turnCount",editable:!0,cellStyle:({value:e})=>+e>0?{background:"#eef7fe"}:{background:"#fadbdb"},width:100}],scoreList:[{width:40,checkboxSelection:!0,headerCheckboxSelection:!0},{headerName:"idx",field:"idx",width:50,editable:!1},{headerName:"score",field:"score",width:100,cellDataType:"number",editable:({data:e})=>e.idx!==0&&!e.idx,valueGetter:({data:e})=>(e.score=e!=null&&e.score?`${e==null?void 0:e.score}`:"0",+e.score)},{headerName:"first",field:"first",width:100,cellEditor:"agSelectCellEditor",editable:({data:e})=>e.idx!==0&&!e.idx,cellEditorParams:{values:["bar1","bar2","bar3","bell","cherry","orange","seven","star","target","watermelon"]}},{headerName:"second",field:"second",width:100,cellEditor:"agSelectCellEditor",editable:({data:e})=>e.idx!==0&&!e.idx,cellEditorParams:{values:["bar1","bar2","bar3","bell","cherry","orange","seven","star","target","watermelon"]}},{headerName:"third",field:"third",width:100,cellEditor:"agSelectCellEditor",editable:({data:e})=>e.idx!==0&&!e.idx,cellEditorParams:{values:["bar1","bar2","bar3","bell","cherry","orange","seven","star","target","watermelon"]}},{headerName:"fourth",field:"fourth",width:100,cellEditor:"agSelectCellEditor",editable:({data:e})=>e.idx!==0&&!e.idx,cellEditorParams:{values:["bar1","bar2","bar3","bell","cherry","orange","seven","star","target","watermelon"]}}],overlay:(e,r)=>{switch(e){case"noRows":return` <div class="flex h-full w-full items-center justify-center font-bold">
          <span class="m-auto rounded-lg border bg-white p-20 shadow-xl">${r||"검색 결과가 없습니다."}</span>
        </div>`;case"loading":return`<div class="ag-overlay-loading-center">
        <div
          style="
            height: 100px;
            width: 100px;
            background: url(https://ag-grid.com/images/ag-grid-loading-spinner.svg) center / contain no-repeat;
            margin: 0 auto;
          "
          aria-label="loading"
        ></div>
        <div>${r||"로딩중..."}</div>
      </div>`}}};export{pe as c,ge as d,he as g};
