var l=Object.defineProperty;var i=(o,s,e)=>s in o?l(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e;var n=(o,s,e)=>(i(o,typeof s!="symbol"?s+"":s,e),e);import{a9 as u,aa as a,p as t,n as c}from"./index-8e7e92d0.js";import{a as g}from"./index-0c264f6f.js";class f{constructor(){n(this,"signIn",async({l:s})=>{try{const{data:e}=await g.post("auth/login",{l:s});if(localStorage.clear(),e.ok){const r=JSON.parse(u(e.data,"login-info"));console.log(r),a.userID=r.userID,a.accessToken=r.accessToken,a.refreshToken=r.refreshToken,a.grade=r.grade,a.signedIn=!0,localStorage.setItem("k",e.data)}else return a.userID="",a.grade="",a.accessToken="",a.refreshToken="",a.signedIn=!1,{ok:!1,msg:e.msg};return e}catch(e){return console.error("sign-in ERROR",e),a.userID="",a.grade="",a.accessToken="",a.refreshToken="",a.signedIn=!1,localStorage.clear(),{ok:!1,msg:e.message?e.message:""}}});n(this,"signUp",async({l:s})=>{try{const{data:e}=await g.post("auth/signUp",{l:s});return!e.ok&&e.msg&&t.error(e.msg),e}catch(e){console.log(e),t.error(e.message)}finally{c.isLoading=!1}});n(this,"getUserList",async()=>{try{const{data:s}=await g.post("auth/get-user-list");return!s.ok&&s.msg&&t.error(s.msg),s}catch(s){console.log(s),t.error(s.message)}finally{c.isLoading=!1}});n(this,"registGame",async({userID:s,gameName:e})=>{try{const{data:r}=await g.post("auth/regist-game",{userID:s,gameName:e});return!r.ok&&r.msg&&t.error(r.msg),r}catch(r){console.log(r),t.error(r.message)}finally{c.isLoading=!1}})}}const k=new f;export{k as a};
